  ```C#
  class Game1<P, T> where P: Person2<T>
  ```
# Индексаторы 
## Описание Индексаторов
Предположим класс содержит некоторое количество однотипных полей, иногда бывает удобно обращаться к полям не по имени, а по некоторому индексу. Рассмотрим, как это реализовать. Для этой цели используются индексаторы, они имеют следующий вид:
```C#
тип this[параметр]
{
	set{...}
	get{...}
}
```
Тип определяет индексированного объекта. Если мы индексируем поля типа int, это будет int. Параметры - некоторые параметры с указанием типа. Если их несколько, то указываем через запятую. set и get предназначены для установки значения и получения значения некоторого поля. 
Пример:
```C#
class Student
{
	public string Name{set; get;}
	public int Group{set; get}
	public int Mat{set; get}
	public int Fiz{set; get}
	public int Him{set; get}
	
	public double SrBall()
	{
		return (Mat + Fiz + Him) / 3.0
	}
	
	public Student(string name, int group, int mat, int fiz, int him)
	{
		Name = name;
		Group = group;
		Mat = mat;
		Fiz = fiz;
		Him = him;
	}
	
	public int this[int k]
	{
		set
		{
			switch(k)
			{
				case 0:
					Mat = value;
					break;
				case 1:
					Fiz = value;
					break;
				case 2:
					Him = value;
					break;
				default: throw new Exeption("Неправильный индекс!");
			}
		}
		get
		{
			switch(k)
			{
				case 0:
					return Mat;
				case 1:
					return Fiz;
				case 2:
					return Him;
				default: throw new Exeption("Неправильный индекс!");
			}
		}
	}
}

class Program
{
	{
		static void Main()
		{
			Student st1 = new Student("Иванов", 51, 5, 4, 4);
			st1[0] = 5;
			Console.Writeline("Student {0}, math {1}", st1.Name, st1.Mat);
		}
	}
}
```
## Перегрузка индексатора 
Индексаторы по аналогии с методами можно перегружать. Таким образом, могут одновременно быть описаны несколько индексаторов для одних и тех же объектов. Они должны отличаться типом, количеством или последовательностью индекса. Определив индексатор, где индекс будет иметь тип string.
Пример:
```C#
public int this [string s]
{
	set
	{
		switch(s)
		{
			case "Математика" : Mat = value; break;
			case "Физика" : Fiz = value; break;
			case "Химия" : Him = value; break;
			default: throw new Exeption("Неправильный индекс!");
		}	
	}
	get
		{
			switch(k)
			{
				case "Математика":
					return Mat;
				case "Физика":
					return Fiz;
				case "Химия":
					return Him;
				default: throw new Exeption("Неправильный индекс!");
			}
		}
}
```
## Индексирование компонентов поля 
Выше мы индексировали поля и индекс соответствовал некоторому полю. Поля могут иметь сложную конструкцию, например, быть массивами. Можно описать индексатор, чтобы индекс соответствовал компонентам этого поля. Для этого опишем класс Students. У него будет одно поле, которое представляет собой массив студентов. Опишем индексаторы для доступа к элементам этого поля. Получим код:

```C#
class Students
{
  private Student[] stud;
  public Students(Student[] stud)
  {
    this.stud = stud;
  }
  public Student this[int k]
  {
    set{stud[k] = value;}
    get{return stud[k];}
  }
}
```
```C#
class Program
{
  static void Main()
  {
    student st2 = new Student("Петров", .....);
    student st3 = new Student("Сидоров", .....);
    student st4 = new Student("Попов", .....);
    student st5 = new Student("Алексеев", .....);
    Student[] sts = {st1, st2, st3, st4, st5};
    Students studs = new Students[sts];
    Console.WriteLine("Студент{0}, ср.балл{1}", studs{2}.Fan, studs{2}.SrBall; Сидоров .....);
  }
}

```
Предположим мы хотим сосчитать общий балл у студентов по математике
```C#
int n = sts.Lenght;
double s = 0;
for (int k = 0; k < n; k++)
{
	s+= studs(k)[0];
	double sz_mat = s/n;
}
```

Выше мы индекс никак не связывали с содержимым самого объекта, можно в качестве индекса использовать какую-то компоненту. Например, можно использовать фамилию студента. Опишем в классе студент индексатор, типа стринг только для чтения, чтобы получать студента по его фамилии
Код может иметь вид:
```C#
public Student this[string s]
{
	get 
	{
		foreach(Student a in stud)
		{
			if (a.Name == s)
				return a;
			throw new Exeption("Такого студента нет!");
		}
	}
}

class Program
{
	static void Main()
	{
		Console.Writeline("Student {0}, group {1}", studs["Иванов"].Name, studs["Иванов"].Group);
	}
}
```

## Использование нескольких индексов 
Индексаторы могут содержать несколько индексов. Они пишутся через запятую
```C#
class Matrix
{
	private int m = new int[,]{{1, 2, 3}, {4, 5, 6}};
	public int this[int i, int j]
	{
		set{ m[i, j] = value;}
		get{ return m[i, j];}
	}
}

class Program
{
	static void Main()
	{
		Matrix mt = new Matrix();
		mt[1, 2] = 10;
		Console.Writeline("First{0}, last{1}", int [0, 0], int [4, 2])
	}
}
```