#Управление_данными 
06.05.2025
# Схема взаимодействия отделов с хранилищем данных
## Этапы создания ХД
![[Pasted image 20250506081817.png|500]] 

**Компонента - средства извлечения, преобразования и загрузки данных:**
- этап извлечения и преобразования;
- этап очистки данных;
- этап загрузки;
- этап обновления;
- управление метаданными.

### Этап извлечения и преобразования
Цель этапа извлечения данных - перенести данные из разнородных источников в базу данных, где их можно модифицировать и добавить в хранилище. Цель последующего этапа преобразования данных устранить несоответствия в схеме и соглашениях о значениях атрибутов. Набор правил и скриптов, как правило, выполняет преобразование данных из исходной схемы в итоговую схему.
К примеру, дистрибьютор может разделить имя каждого клиента на три части: имя, отчество (или инициалы) и фамилия

### Этап загрузки
После того, как данные извлечены и преобразованы, возможно, что их еще необходимо дополнительно обработать перед тем, как добавить в хранилище.
Как правило, утилиты фоновой загрузки поддерживают такие функции, как проверка ограничений целостности; сортировка; суммирование, агрегирование и выполнение других вычислений для создания производных таблиц, размещаемых в хранилище; создание индексов и других способов доступа.
Помимо наполнения хранилища, утилита загрузки должна позволять системным администраторам проверять статус; отменять, приостанавливать и возобновлять загрузку; возобновлять работу после ошибки без потери целостности данных

###  Этап обновления
Должны быть рассмотрены два вопроса: когда обновлять и как обновлять
1. Обычно хранилища данных обновляются периодически в соответствии с заранее установленным расписанием, например, ежедневно или еженедельно
2. Администраторы хранилища данных определяют правила обновления в зависимости от требований пользователей и трафика. Расписание обновлений может быть различным для разных источников данных.

## Управление метаданными

**Метаданные** - информация любого рода, которая требуется для управления хранилищем данных, а управление метаданными административным метаданным относится вся информация, которая существенный компонент архитектуры хранения. К требуется для настройки и использования хранилища данных. Бизнес-метаданные включают в себя бизнес-термины и определения, принадлежность данных и правила оплаты услуг хранилища.
**Оперативные метаданные** - это информация, собранная во время работы хранилища данных, такая как происхождение перенесенных преобразованных данных; статус использования данных (активные, архивированные или удаленные); данные мониторинга, такие как статистика использования, сообщения об ошибках и результаты аудита.
Метаданные хранилища часто размещаются в репозитории, который позволяет совместно использовать метаданные различным инструментам и процессам при проектировании, установке, использовании, эксплуатации и администрировании хранилища.

# Денормализованные, пространственные БД
Одним из направлений развития РБД в интересах систем принятия решений является разработка таблиц с денормализованной формой (модификации схемы организации данных типа звезда).
Структура такой базы данных не будет реляционной - это будет пространственная база данных с целью анализа данных, а не выполнения транзакций.

## Методология Dimensional
Нормализация данных в реляционных СУБД приводит к созданию множества связанных между собой таблиц. В результате, выполнение сложных запросов неизбежно приводит к объединению многих таблиц, что существенно увеличивает время отклика
Создание хранилища данных подразумевает создание денормализованной структуры данных (допускается избыточность данных и возможность возникновения аномалий при манипулировании данными), ориентированной в первую очередь на высокую производительность при выполнении аналитических запросов.
Нормализация делает модель хранилища слишком сложной, затрудняет ее понимание и ухудшает эффективность выполнения запроса.

## Особенности проектирования
Моделирование Dimensional сходно с моделированием связей и сущностей для реляционной модели, но отличаются целями.
Реляционная модель акцентируется на целостности и эффективности ввода данных.
Размерная (Dimensional) модель ориентирована в первую очередь на выполнение сложных запросов к БД.

## О схеме звезда
В размерном моделировании принят стандарт модели, называемый схемой звезда (star schemа), которая обеспечивает высокую скорость выполнения запроса посредством денормализации и разделения данных.
Невозможно создать универсальную денормализованную структуру данных, обеспечивающую высокую производительность при выполнении любого аналитического запроса. Поэтому схема звезда строится так, чтобы обеспечить наивысшую производительность при выполнении одного самого важного запроса, либо для группы похожих запросов.

### Основные составляющие структуры хранилищ данных
Схема звезда обычно содержит одну большую таблицу, называемую таблицей факта (fact table), помещенную в центр, и окружающие ее меньшие таблицы, называемые таблицами размерности (dimensional table), cоединенные с таблицей факта в виде звезды радиальными связями. В этих связях таблицы размерности являются родительскими, таблица факта - дочерней. Схема звезда может иметь также консольные таблицы (outrigger table), присоединенные к таблице размерности. Консольные таблицы являются родительскими, таблицы размерности - дочерними.

### Таблица (ы) фактов
Прежде чем создать DW со схемой типа звезда, необходимо проанализировать бизнес-правила предметной области с целью выяснения центрального вопроса ответ на который наиболее важен. Все прочие вопросы должны быть объединены вокруг этого основного вопроса и моделирование должно начинаться с него Данные, необходимые для ответа на этот а вопрос, должны быть помещены в центральную таблицу модели таблицу факта

### О связи таблицы фактов с таблицами измерений
Таблица факта является центральной таблицей в схеме звезда Она может состоять из миллионов строк и содержать суммирующие или фактические данные, которые ответить на требуемые вопросы. Она соединяет данные, которые е могут помочь хранились бы во многих таблицах традиционных реляционных базах данных. Таблица факта и таблицы размерности связаны идентифицирующими связями, при этом первичные ключи таблицы размерности мигрируют в таблицу факта в качестве внешних ключей. В размерной модели направления связей не показываются - они определяются типом таблиц. Таблица и явно фактов, как правило, содержит уникальный составной ключ объединяющий первичные ключи таблиц измерений. Чаще всего это целочисленные значения либо значения типа «дата/время» ведь таблица фактов может содержать сотни тысяч или даже миллионы записей, и хранить в ней повторяющиеся текстовые описания, как правило, невыгодно - лучше поместить их в меньшие по объему таблицы измерений.

### Наиболее часто встречающихся типы фактов
- факты, связанные с транзакциями (Transaction facts). Они основаны на отдельных событиях (типичными примерами которых являются телефонный звонок или снятие денег со счета с помощью банкомата):
- факты, связанные с «моментальными снимками» (Snapshot facts). Основаны на состоянии объекта (например, банковского счета) в определенные моменты времени, например на конец дня или месяца. Типичными примерами таких фактов являются объем продаж за день или дневная выручка
- факты, связанные элементами документа (Line-item facts). Основаны на том или ином документе (например, счете за товар или услуги) и содержат подробную информацию об элементах этого документа (например, количестве, цене проценте скидки);
- факты, связанные с событиями или состоянием объекта (Event or state facts). Представляют возникновение события без подробностей о нем (например, просто факт продажи или факт отсутствия таковой без иных подробностей).

# Кубы данных (многомерная модель данных)
## Понятие о кубах
Куб OLAР - это структура, в которой хранятся совокупности данных, полученные из базы данных OLАР путем всех возможных сочетаний измерений с фактами продаж в таблице фактов Исходя из этого, создание окончательного отчета выполняется гораздо эффективнее, поскольку не требует выполнения никакого сложного запроса

## Основными понятиями многомерной модели данных являются:
**Показатель** - это величина (обычно числового типа), которая собственно 1 является предметом анализа. Один OLAP-куб может обладать одним или несколькими показателями. **Измерение** (dimension) - это множество объектов одного или нескольких типов, организованных в виде иерархической структуры и обеспечивающих информационный контекст числового показателя. Измерение принято визуализировать в виде ребра многомерного куба.
Объекты, совокупность которых и образует измерение, называются **членами измерений** (members). Члены измерений визуализируют как точки или участи, откладываемые на осях гиперкуба. Например, временное измерение: Дни, Месяцы, Кварталы, Годы наиболее часто используемые в анализе, могут содержать следующие члены: 8 мая 2002 года, май 2002 года, 2-ой квартал 2002 года и 2002 год Как уже было сказано, объекты в измерениях могут быть различного , например "производители" - "марки автомобиля" или "годы" - "кварталы". Эти объекты должны быть организованы в иерархическую структуру так, чтобы объекты одного типа принадлежали только одному уровню иерархии. 
**Ячейка** (cell) - атомарная структура куба, соответствующая конкретному значению некоторого показателя. Ячейки при визуализации располагаются внутри куба и здесь же принято отображать соответствующее значение показателя.

## Роль измерений в кубе
Измерения играют роль индексов, используемых для идентификации значений показателей, находящихся в ячейках гиперкуба. Комбинация членов различных измерений играют роль координат, которые определяют значение определенного показателя. Поскольку для куба может быть определено несколько показателей, то комбинация членов всех измерения будет определять несколько ячеек со значениями каждого из показателей. Поэтому для однозначной идентификации ячейки необходимо указать комбинацию членов всех измерений и показатель.

# Иерархии в измерениях необходимы для возможности агрегации и детализации значений показателей
Существуют следующие типы иерархий:
сбалансированные; 
несбалансированные;
неровные.

## Сбалансированные иерархий
Это - иерархии, в которых число уровней определено её структурой и неизменно, и каждая ветвь иерархического дерева содержит объекты каждого из уровней. Каждому производителю автомобилей может соответствовать несколько марок автомобилей, а каждой марке - несколько моделей автомобилей, поэтому можно говорить о трёхуровневой иерархии этих объектов. В этом случае на первом уровне иерархии располагаются производители, на втором марки, а на третьем модели Как видно, для формирования сбалансирована ванной иерархии необходимо наличие связи "один-ко-многим" между объектами менее детального уровня по отношению к объектам более детального уровня. В принципе каждый уровень сбалансированной иерархии можно представить как отдельное простое измерение, но тогда эти измерения окажутся зависимыми, в значит неизбежно повышение разреженности
## Несбалансированные иерархии
Это - иерархии, в которых число уровней может быть изменено, и каждая ветвь иерархического дерева может содержать объекты, принадлежащие не всем уровням, только нескольким первым.
Необходимо заметить, что все объекты несбалансированной иерархии принадлежат одному типу
Типичный пример несбалансированной иерархии - иерархия типа "начальник- подчиненный", где все объекты имеют один и тот же тип - "Сотрудник".

## Неровные иерархии
Это- иерархии, в которых число уровней определено её структурой и постоянно, однако в отличие от сбалансированной иерархий некоторые ветви иерархического дерева могут не содержать объекты какого-либо уровня.
Иерархии такого вида содержат такие члены, логические "родители" которых не находятся на непосредственно вышестоящем уровне. Типичным примером является географическая иерархия, в которой есть уровни "Страны", «Регионы" и "Города", но при этом в наборе данных имеются страны, не имеющие штатов или регионов между уровнями "Страны" "Города".