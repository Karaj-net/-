#Управление_данными 
15.04.2025
# Моделирование при использовании языка разметки XML. Спецификация XML.
## Что такое XML?
- XML или Extensible Markup Language (Расширяемый Язык Разметки), является языком разметки, который вы можете использовать для создания ваших собственных тегов.
- Был создан в World Wide Web Consortium (W3C) для преодоления ограничений языка HTML, Hypertext Markup Language (Гипертекстовый Язык Разметки), который является основой всех Web-страниц. 
- Как и HTML, XML базируется на SGML - Standard Generalized Markup Language (Стандартный Обобщенный Язык Разметки). XML был разработан с прицелом на Web.

HTML наиболее успешный язык разметки всех времен. Вы можете просмотреть простейшие теги HTML практически на любом устройстве от PDA до мейнфрейма И вы можете даже преобразовать разметку HTML в голос и в другие форматы при помощи соответствующих инструментов. При таком успехе HTML, почему же W3C создал XML? Чтобы ответить на этот вопрос, взглянем на такой документ:
```HTML
<p><b>Mrs. Mary McGoon</b>

<br>

1401 Main Street

<br>

Anytown, NC 34829</p>
```
<p><b>Mrs. Mary McGoon</b>

<br>

1401 Main Street

<br>

Anytown, NC 34829</p>

## Теги, элементы и атрибуты
Есть три общих термина, используемых для описания частей XML-документа: *теги, элементы и атрибуты*. Вот пример документа, иллюстрирующего эти термины:
```XML
<address>
<name>
<title>Mrs.</title>
<first-name>
Mary
</first-name>
<last-name>
MeGoon
</last-name>
</name>
<street>
1401 Main Street
</street>
<city state="NC">Anytown</city>
<postal-code>
34829
</postal-code>
</address>
```
<address>
<name>
<title>Mrs.</title>
<first-name>
Mary
</first-name>
<last-name>
MeGoon
</last-name>
</name>
<street>
1401 Main Street
</street>
<city state="NC">Anytown</city>
<postal-code>
34829
</postal-code>
</address>

- *Тег* - это текст между левой угловой скобкой (<) и правой угловой скобкой (>). Есть начальные теги (такие, как `<name>`) и конечные теги (такие, как `</name>`) 
- *Элементом* является начальный тег, конечный тег и все, что есть между ними. В примере выше элемент `<name>` содержит два дочерних элемента: `<title>`, `<first-name>` и `<last-name>`.
- *Атрибут* - это пара имя-значение внутри начального тега элемента. В данном примере state является атрибутом элемента `<city>`; в предыдущем примере `<state>`

###  Правила XML-документа
*Спецификация XML требует, чтобы парсер браковал любой XML-документ, который не выдерживает основные правила*. Большинство парсеров HTML принимает небрежную разметку, делая предположения о том, что автор документа имел в виду. Чтобы обойти путаницу, возникающую структурированных HTML-документах, создатели XML с самого для плохо начала сделать структуру документа законом.

### Неправильные, правильные, и правильно-форматированные документы
**Есть три вида XML-документов**:
- *Неправильные документы* не следуют синтаксическим правилам, определенным спецификацию XML. Если разработчик определил правила для документа, которые могут содержаться в DTD или в схеме, и документ не следует этим правилам, такой документ также является неправильным. (См. введение DTD и схемы для XML-документов в Определение содержимого документа.)
- *Правильные* документы следуют синтаксическим правилам XML и правилам, определенным в их DTD или в схеме.
- *Правильно-форматированные* документы следуют синтаксическим правилам XML, но не имеют DTD или в схемы.

#### 1. Корневой элемент
Документ XML должен содержаться в единственном элементе. Этот единственный элемент называется корневым элементом содержит весь текст и любые другие элементы документа. следующем примере XML-документ содержит единственный элемент, элемент `<greeting>`. Заметьте, что документ содержит комментарий вне корневого элемента, который является вполне допустимым.
```XML
<?xml version="1.0"?>
<!-- Правильно-форматированный документ -->
<greeting>
Hello, World!
</greeting>
```
<?xml version="1.0"?>
<!-- Правильно-форматированный документ -->
<greeting>
Hello, World!
</greeting>

#### 2. Элементы не могут перекрываться
```XML
<!-- Неправильная разметка XML-->
<p>
<b>I<i>really
love</b> XML.
</i>
<p>

<!-- Правильная разметка XML -->
<p>
<b>I <i>really
love</i></b>
<i>XML.</i>
</p>
```
<p>

<b>I<i>really

love</b> XML.

</i>

<p>

<!-- Правильная разметка XML -->

<p>

<b>I <i>really

love</i></b>

<i>XML.</i>

</p>

#### 3. Конечные теги являются обязательными

#### 4. Элементы XML чувствительны к регистру

#### 5. Атрибуты должны иметь значения в кавычках
Есть два правила для атрибутов в XML-документах:
- Атрибуты должны иметь значения
- Эти значения должны быть заключены в кавычки

Сравните два примера ниже. Разметка вверху правильна в HTML, но не в XML. Чтобы сделать ее эквивалент в XML, вы
должны дать атрибуту значение и взять его в кавычки.
```XML
<!-- Неправильная разметка XML -->
<ol compact>
<!-- legal XML markup -->
<ol compact="yes">
```

#### 6. Объявления XML
Объявление может содержать до трех пар имя-значение (многие называют их атрибутами, хотя технически они таковыми не являются).
 - *version* - используемая версия XML; в настоящее время она должна быть 1.0. 
 - e*ncoding* - набор символов, используемый в этом документе. Набор символов ISO-8859-1, на который ссылается данное объявление, включает в себя символы, используемые в большинстве западноевропейских языков. Если encoding не указан, XML-парсер предполагает набор UTF-8, стандарт Unicode, который поддерживает почти все символы и иероглифы всех Языков мира.

<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>

- standalone, который может быть либо yes, либо по, определяет, может ли этот документ быть обработан без чтения каких-либо других файлов.
- Например, если XML-документ не ссылается на другие файлы, вы должны указать standalone="yes". Если же XML-документ ссылается на другие файлы, который описывают, что документ может содержать (больше об этих файлах через минуту), вы должны указать standalone="no". Поскольку по умолчанию предполагается standalone="no", вы редко видите standalone в XML-объявлениях.
### Определение содержимого документа
- Одним методом является использование Document Type Definition или DTD (Определение Типа Документа). DTD определяет элементы, которые могут появляться в XML- документе, порядок, в котором они могут появляться, как они могут быть вложены друг в друга и другие основные структуры XML-документа. DTD являются частью исходной детали спецификации XMI и они очень похожи на DID B SGML
- Другим методом является использование XML Schema (схема XML). Схема может определить все то в структуре документа, что вы можете поместить в DTD, и может также определить типы данных и более сложные правила, чем DTD. W3C разработала спецификацию XML Schema через пару лет после исходной спецификации XML.

### DTD - Определение Типа документа
**DTD позволяет вам задать основную структуру XML-документа**. Следующая пара разделов рассматривает фрагменты DTD. Прежде всего, вот DTD, которое определяет основную структуру примера документа адреса из раздела Что такое XML?:
```XML
<!-- address.dtd -->
<!ELEMENT address (name, street, city, state, postal-code)>
<!FLFMENT name (title? first-name, last-name)
<!ELEMENT title (#PCDATA)>
<!ELEMENT first-name (#PCDATA)>
<!ELEMENT last-name (#PCDATA)>
<!ELEMENT street (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT state (#PCDATA)>
<!ELEMENT postal-code (HPCDATA)
```

Это DTD определяет все элементы, используемые в примере документа. Оно определяет три основные вещи:
- Элемент `<address>` содержит `<name>`, `<street>`, `<city>`, `<state>` `<postal-code>`. Все эти элементы должны присутствовать и именно в таком порядке.
- Элемент `<name>` содержит необязательный элемент `<title>` (знак вопроса означает, что `<title>` является необязательным), за которым следует элемент first-name и элемент last name
- Все другие элементы содержат текст. (#PCDATA обозначает разбираемые символьные данные; вы не можете включать другие элементы эти элементы.)
Хотя DTD простое, оно проясняет, какие комбинации элементов являются допустимыми. Документ адреса, который имеет элемент `<postal-code>` перед элементом `<state>`, не является правильным, как документ, который не имеет элемента `<last-name>`.

## Символы в DTD
Есть несколько символов, используемых в DTD для индикации того, как часто (или когда) что-либо может появляться в XML-документе. Вот некоторые примеры и их смыслы

<!ELEMENT address (name, city, state)> 
Элемент `<address>` должен содержать элементы `<name>`, `<city>` `<state>` в таком порядке. Все элементы являются обязательными. Запятая показывает список элементов.

<!ELEMENT name (title?, first-name, last-name)>
Это означает, что элемент `<name>` содержит необязательный элемент `<title>`, за которым следуют обязательные элементы `<first-name>` `<last-name>`. Знак вопроса показывает, что элемент является необязательным; он может появляться один раз или не появляться вообще.

<!ELEMENT addressbook (address+)>
Элемент `<ddressbook>` содержит один или более элементов `<address>`. Вы можете иметь столько элементов `<address>`, сколько вам нужно, но должен присутствовать хотя бы один. Знак плюс показывает, что элемент появляется хотя бы один раз, но может появляться и сколько угодно раз.

---

Есть несколько символов, используемых в DTD для индикации того, как часто (или когда) что-либо может появляться в XML-документе. Вот некоторые примеры и их смысл: 

<!ELEMENT private-addresses (address*)>
Элемент `<private-addresses>` содержит ноль или более элементов `<address>`. Звездочка показывает, что элемент может появляться сколько угодно раз, включая ноль. 

<!ELEMENT name (title?, first-name, (middle-initial | middle-name)?, last-name)>
Элемент `<name>` содержит необязательный элемент `<title>`, за которым следует элемент first name, за которым, возможно следует элемент middle-initial или элемент `<middle-name>`, за которым следует элемент `<last-name>`. Другими словами, оба элемента `<middle-initial>` и `<middle-name>` являются необязательными, и вы можете иметь только один из этих двух. Вертикальная черта показывает список вариантов; вы можете выбрать только один элемент из списка. Также заметьте, что этот пример использует скобки для группирования определенных элементов и он использует знак вопроса применительно к группе.

<!ELEMENT name ((title?, first-name, last-name) | (surname, mothers-name, given- name))>
Элемент `<name>` может содержать одну из двух последовательностей. Необязательный `<title>`, за которым следуют `<first-name>` и `<last-name>`; или `<surname>`, `<mothers-name>` и `<given-name>`.

## Схемы  XML
- Схемы XML используют синтаксис XML. Другими словами, схема XML является XML-документом. Это означает, что вы можете обрабатывать схему так же, как и любой другой документ. Например, таблицу стилей XSLT, которая преобразует схему XML Web-форму вместе с вы можете написать автоматической генерацией кода JavaScript, который будет проверять данные по мере их ввода. 
- Схемы XML поддерживают типы данных. Хотя DTD выполняет поддержку типов данных, оно рассматривает эти типы данных только точки зрения публикации. Схемы XML поддерживают все входные тины данных DID (такие, как ID и ссылки ID). Они также поддерживают целые вещественные числа, даты и времена, строки, URL и другие типы данных, полезные для обработки и проверки данных. 
- Схемы XML являются расширяемыми. Кроме типов данных, определенных в спецификации XML schema, вы можете также создавать собственные типы и можете создавать типы-наследники на базе других типов данных. 
- Схемы XML имеют более мощные выражения. Например, при помощи схем XML вы можете определить, что любое значение атрибута `<state>` не может быть длиннее двух символов или что любое значение элемента `<postal- code>` должно соответствовать регулярному выражению `[0-9]{5}(-[0-9]{4})?.`

